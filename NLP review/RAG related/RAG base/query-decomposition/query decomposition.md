# 查询分解(query decomposition)

[详细讲了 decomposition](https://zhuanlan.zhihu.com/p/685746861)


---


### decompose

在 RAG 中，query 分解是指将输入的问题（query）分解成多个子查询（sub-query）的过程。这种方法旨在增加模型对问题的理解能力，提高检索到相关文档的准确性。

具体来说，query 分解的过程可能涉及以下几个步骤：

1. **语义解析**：首先，输入的问题被进行语义解析，以确定问题中的关键信息、实体、关系等。这可以通过预训练的语言模型或者其他自然语言处理技术来实现。

2. **子查询生成**：基于语义解析的结果，系统会生成多个子查询，每个子查询都是原始问题的一个部分或者针对问题的不同方面提出的一个新问题。这些子查询可以涵盖问题的不同方面，从而更全面地描述问题。

3. **扩展性考虑**：在生成子查询时，还会考虑到子查询之间的相关性和扩展性。子查询之间可能存在一定的依赖关系，或者可以通过结合起来获得更好的检索效果。

4. **查询组合**：生成子查询后，这些子查询会被组合起来形成一个查询集合，然后送入检索模型进行文档检索。检索模型会返回与这些子查询相关的文档集合，然后再进行后续的再排名和生成步骤。

通过将问题分解成多个子查询，RAG 能够更好地理解问题的语义和语境，从而提高了检索到相关文档的准确性和生成答案的质量。同时，子查询的生成也为模型提供了更多的探索空间，从而提高了系统的灵活性和适用性。

![alt text](image.png)


**序列求解思想**

( 源于 [least-to-most prompting](https://arxiv.org/pdf/2205.10625.pdf) and [IRCoT](https://arxiv.org/pdf/2212.10509.pdf) )

![alt text](image-1.png)
