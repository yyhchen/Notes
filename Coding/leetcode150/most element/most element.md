# 169.å¤šæ•°å…ƒç´ 
**ï¼ˆeasyï¼‰**

---
ç»™å®šä¸€ä¸ªå¤§å°ä¸º n çš„æ•°ç»„ `nums` ï¼Œè¿”å›å…¶ä¸­çš„å¤šæ•°å…ƒç´ ã€‚å¤šæ•°å…ƒç´ æ˜¯æŒ‡åœ¨æ•°ç»„ä¸­å‡ºç°æ¬¡æ•° **å¤§äº** `âŒŠ n/2 âŒ‹` çš„å…ƒç´ ã€‚

ä½ å¯ä»¥å‡è®¾æ•°ç»„æ˜¯éç©ºçš„ï¼Œå¹¶ä¸”ç»™å®šçš„æ•°ç»„æ€»æ˜¯å­˜åœ¨å¤šæ•°å…ƒç´ ã€‚



**ç¤ºä¾‹ 1ï¼š**

    è¾“å…¥ï¼šnums = [3,2,3]
    è¾“å‡ºï¼š3


**ç¤ºä¾‹ 2ï¼š**

    è¾“å…¥ï¼šnums = [2,2,1,1,1,2,2]
    è¾“å‡ºï¼š2


<br>
<br>
<br>


**è§£é¢˜æ–¹æ³•ï¼š**
æˆ‘çš„æƒ³æ³•ï¼Œä½†æ˜¯æœ‰bug

1. åŒæŒ‡é’ˆğŸª¡ï¼Œå…ˆç»™æ•°ç»„æ’åº
2. `head` å’Œ `slow` ç®—é•¿åº¦ï¼Œéå†æ•°ç»„ï¼Œç›´åˆ° `nums[head] != nums[slow]`, æ‰¾åˆ°äº†å…¶ä¸­ä¸€ä¸ªå…ƒç´ ã€‚
3. æ­¤æ—¶ï¼Œå…ƒç´ å€¼ `v = nums[tail]`; è®°å½•é•¿åº¦ `l = head - tail`; å¹¶æ›´æ–°ä¸‹ä¸€ä¸ªå…ƒç´ èµ·ç‚¹ `tail = head`
4. åªè¦ä¸ç¬¦åˆ **2.** åˆ™ `head++` ï¼ˆæ³¨æ„âš ï¸ï¼Œ **è¿™ä¸æ˜¯else**ï¼‰
5. æœ€åè¿”å› v (bugåœ¨è¿™ï¼Œå› ä¸ºæˆ‘ä¸‹é¢ä»£ç ä¸­ï¼Œåªæ‰¾åˆ°äº†æœ€å¤§çš„é•¿åº¦`l`ï¼Œå´æ²¡æœ‰è®°å½•å¯¹åº”çš„`v`)


```cpp{.line-numbers}
class Solution {
public:
    int majorityElement(vector<int>& nums) {
        int head = 0, tail = 0;
        int v = 0, l = 0;
        int len = nums.size();
        sort(nums.begin(), nums.end());
        if(nums.empty()){
            return 0;
        }

        while(head < len){
            if(nums[head] != nums[tail]){
                v = nums[tail]; //bugåœ¨è¿™ï¼Œåªä¼šæ‰¾åˆ°æœ€åä¸€æ¬¡ï¼›å¹¶ä¸æ˜¯å¯¹åº”æœ€å¤§é•¿åº¦çš„å€¼
                l = max(head-tail, l);
                tail = head;
            }
            head++;
        }
        return v;
    }
};

```

<br>
<br>

**ä¿®æ­£åï¼š**
```cpp{.line-numbers}
class Solution {
public:
    int majorityElement(vector<int>& nums) {
        int head = 0, tail = 0;
        int v = 0, l = 0;
        int len = nums.size();
        sort(nums.begin(), nums.end());
        if(nums.empty()){
            return 0;
        }

        while(head < len){
            if(nums[head] != nums[tail]){
                int curr_len = head - tail;
                if(curr_len >= l){
                    v = nums[tail];
                    l = curr_len;
                }
                //l = max(head-tail, l);
                tail = head;
            }
            head++;
        }
        // å¤„ç†æœ«å°¾çš„æƒ…å†µ
        int current_length = head - tail;
        if (current_length > l) {
            l = current_length;
            v = nums[tail];
        }
        return v;
    }
};
```

1. åŠ å…¥ä¸€ä¸ªå˜é‡ `curr_len` åˆ¤æ–­ä¸å½“å‰ `l` ä½œæ¯”è¾ƒï¼Œè®°å½•æœ€é•¿ `l`, æ­¤æ—¶æ‰ç»™å¯¹åº”çš„ `v` èµ‹å€¼; ï¼ˆ**ä¿®å¤äº†ä¹‹å‰æ‰¾ä¸åˆ° æœ€é•¿ `l` å¯¹åº”çš„ `v`** ï¼‰
2. ğŸ‘®â€â™€ï¸âš ï¸å› ä¸ºéå†ä¸­æŸ¥æ‰¾æœ€é•¿çš„æ¡ä»¶æ˜¯: `nums[head] != nums[tail]`, æ‰€ä»¥å¯èƒ½ä¼šå¿½ç•¥æœ«å°¾æœ€é•¿çš„æƒ…å†µã€‚å› ä¸º**æœ«å°¾**å¦‚æœ**å…¨éƒ¨å…ƒç´ ç›¸åŒ**ï¼Œ**æ˜¯æ— æ³•æ‰¾åˆ°** `nums[head] != nums[tail]` 
3. æ•…ä»ç„¶éœ€è¦ç»™æœ«å°¾åšå‡ºåˆ¤æ–­ï¼Œç­‰æ‰€æœ‰çš„ `head++` ,å†åŠ å¤šä¸€æ¬¡ `curr_len` ä¸ `l` çš„æ¯”è¾ƒå³å¯ã€‚


---

### å®˜è§£ï¼š

**å“ˆå¸Œè¡¨ï¼š**
```cpp{.line-numbers}
class Solution {
public:
    int majorityElement(vector<int>& nums) {
        unordered_map<int, int> counts;
        int majority = 0, cnt = 0;
        for (int num: nums) {
            ++counts[num]; //æ£€æŸ¥ å¥numæ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ›å»º+1ï¼Œ å­˜åœ¨ç›´æ¥+1
            if (counts[num] > cnt) {
                majority = num;
                cnt = counts[num];
            }
        }
        return majority;
    }
};
```

**ç®—æ³•æ€æƒ³ï¼š**

1. åˆ›å»ºäº†ä¸€ä¸ªå“ˆå¸Œè¡¨ `counts`ï¼Œç”¨äºè®°å½•æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ã€‚
2. å®šä¹‰äº†ä¸¤ä¸ªæ•´æ•°å˜é‡ `majority` å’Œ `cnt`ï¼Œå…¶ä¸­ `majority` ç”¨äºè®°å½•å½“å‰å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ ï¼Œ`cnt` ç”¨äºè®°å½•å½“å‰æœ€å¤§çš„å‡ºç°æ¬¡æ•°ã€‚
3. éå†è¾“å…¥çš„æ•°ç»„ `nums`ï¼Œå¯¹äºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´  `num`ï¼Œæ›´æ–°å“ˆå¸Œè¡¨ `counts` ä¸­å¯¹åº”å…ƒç´ çš„å‡ºç°æ¬¡æ•°ï¼Œå¹¶åˆ¤æ–­å½“å‰å…ƒç´ çš„å‡ºç°æ¬¡æ•°æ˜¯å¦è¶…è¿‡äº† `cnt`ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™æ›´æ–° `majority` å’Œ `cnt` çš„å€¼ä¸ºå½“å‰å…ƒç´ å’Œå¯¹åº”çš„å‡ºç°æ¬¡æ•°ã€‚
4. æœ€åè¿”å› `majority`ï¼Œå³æ•°ç»„ä¸­çš„ä¸»è¦å…ƒç´ ã€‚

**å¤æ‚åº¦åˆ†æï¼š**
è¿™æ®µä»£ç çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä½¿ç”¨å“ˆå¸Œè¡¨æ¥ç»Ÿè®¡æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå¹¶æ‰¾åˆ°å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ ã€‚ç”±äºå“ˆå¸Œè¡¨çš„æŸ¥æ‰¾æ“ä½œçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œå› æ­¤æ•´ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚å› æ­¤ï¼Œè¿™æ˜¯ä¸€ç§æ—¶é—´å¤æ‚åº¦è¾ƒä½çš„æ–¹æ³•æ¥æ‰¾åˆ°æ•°ç»„ä¸­çš„ä¸»è¦å…ƒç´ ã€‚

<br>
<br>

**éœ€è¦æ³¨æ„çš„æ˜¯ï¼š**
é€‰æ‹© `unorderd_map` æ˜¯å› ä¸ºæ—¶é—´å¤æ‚åº¦ä¸º O(1), è€Œ `map` æ—¶é—´å¤æ‚åº¦ä¸º O(logn); å› ä¸ºä¸€ä¸ªæ˜¯æ— åºï¼Œä¸€ä¸ªæ˜¯æœ‰åº(åŸºäºçº¢é»‘æ ‘æŸ¥è¯¢)ã€‚

